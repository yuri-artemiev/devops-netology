# Домашнее задание к занятию "3.5. Файловые системы"

1. Узнайте о sparse (разряженных) файлах.  
  Разряженный файл - файл в котором, последовательности нулевых байтов заменены на информацию об этих последовательностях. Эта информация храниться в метаданных файловой системы.  
1. Могут ли файлы, являющиеся жесткой ссылкой на один объект, иметь разные права доступа и владельца? Почему?  
  Права доступа у всех жёстких сылок одинаковы. Потому что inode содержит информацию о правах доступа. А inode у жётских ссылок одинаковый.  
1. Используя `fdisk`, разбейте первый диск на 2 раздела: 2 Гб, оставшееся пространство.  
    ```
    fdisk -l /dev/sdb
    Disk /dev/sdb: 2.51 GiB, 2684354560 bytes, 5242880 sectors
    ...
    Device     Boot   Start     End Sectors  Size Id Type
    /dev/sdb1          2048 4196351 4194304    2G 83 Linux
    /dev/sdb2       4196352 5242879 1046528  511M 83 Linux
    ```

1. Используя `sfdisk`, перенесите данную таблицу разделов на второй диск.  
  Команда `sfdisk -d` выводит содержание таблицы разделов (dump) по умолчанию на экран. Её вывод можно использовать для создание таблцицы разделов на втором диске.  
  `sfdisk -d /dev/sdb | sfdisk /dev/sdc`  
  Результат на втором диске  
    ```
    fdisk -l /dev/sdc
    Disk /dev/sdc: 2.51 GiB, 2684354560 bytes, 5242880 sectors
    ...
    Device     Boot   Start     End Sectors  Size Id Type
    /dev/sdc1          2048 4196351 4194304    2G 83 Linux
    /dev/sdc2       4196352 5242879 1046528  511M 83 Linux
    ```
  
1. Соберите `mdadm` RAID1 на паре разделов 2 Гб.  
...  
1. Соберите `mdadm` RAID0 на второй паре маленьких разделов.  
...  
1. Создайте 2 независимых PV на получившихся md-устройствах.  
...  
1. Создайте общую volume-group на этих двух PV.  
...  
1. Создайте LV размером 100 Мб, указав его расположение на PV с RAID0.  
...  
1. Создайте `mkfs.ext4` ФС на получившемся LV.  
...  
1. Смонтируйте этот раздел в любую директорию, например, `/tmp/new`.  
...  
1. Поместите туда тестовый файл, например `wget https://mirror.yandex.ru/ubuntu/ls-lR.gz -O /tmp/new/test.gz`.  
...  
1. Прикрепите вывод `lsblk`.  
...  
1. Протестируйте целостность файла  
...  
1. Используя pvmove, переместите содержимое PV с RAID0 на RAID1.  
...  
1. Сделайте `--fail` на устройство в вашем RAID1 md.  
...  
1. Подтвердите выводом `dmesg`, что RAID1 работает в деградированном состоянии.  
...  
1. Протестируйте целостность файла, несмотря на "сбойный" диск он должен продолжать быть доступен:  
...  
  
